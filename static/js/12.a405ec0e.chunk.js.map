{"version":3,"sources":["compoent_d/ContentShow/ContentShow.js","compoent_d/ContentShow/ContentShow.scss","features/task_tech/Tech.scss","features/task_tech/Tech.js"],"names":["marked","require","setOptions","renderer","Renderer","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","highlight","str","lang","hljs","getLanguage","value","__","highlightAuto","image_show","ContentShow","state","html_show","select_title_id","img_url","addClickImg","e","path","nodeName","params","oPics","document","getElementsByTagName","param","imageArray","i","length","push","url","src","index","setState","PreviewApi","preview","body","removeEventListener","this","ServerNetWorkUtils","getArticleByArticleId","props","id","then","res","result","content","title","tagsCallback","tags","catch","error","addEventListener","className","styles","right_main","dangerouslySetInnerHTML","__html","React","Component","module","exports","Tech","useState","items","setItems","types","setTypes","setSelectId","getTitlesByTypeItemId","objectId","getAllTitlesArticleItemId","reverse","item","data","year","Date","getFullYear","datas","undefined","useEffect","initBmob","getAllTitlesTB_Type_Items","main","left_main","map","onClick","name","title_select","v_line"],"mappings":"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","file":"static/js/12.a405ec0e.chunk.js","sourcesContent":["import ServerNetWorkUtils from \"@/data_model/ServerNetWorkUtils\";\r\n\r\nimport React from \"react\";\r\n\r\nimport styles from './ContentShow.scss';\r\n\r\nimport hljs from \"highlight.js\";\r\nimport 'highlight.js/styles/atom-one-dark.css';\r\nimport './markdown10.scss';\r\n\r\nimport { PreviewApi } from '@zzwing/react-image'\r\n\r\n\r\nvar marked = require('marked');\r\nmarked.setOptions({\r\n    renderer: new marked.Renderer(),\r\n    gfm: true,\r\n    tables: true,\r\n    breaks: true,\r\n    pedantic: false,\r\n    sanitize: false,\r\n    smartLists: true,\r\n    smartypants: false,\r\n    highlight: function (str, lang) {\r\n        if (lang && hljs.getLanguage(lang)) {\r\n            try {\r\n                return hljs.highlight(lang, str).value;\r\n            } catch (__) {\r\n            }\r\n        }\r\n\r\n        try {\r\n            return hljs.highlightAuto(str).value;\r\n        } catch (__) {\r\n        }\r\n\r\n        return ''; // use e\r\n    }\r\n});\r\n\r\nlet image_show = false;\r\nexport default class ContentShow extends React.Component {\r\n\r\n    state = {\r\n \r\n        html_show: \"\",\r\n        select_title_id: '',\r\n        img_url: '',\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        document.body.removeEventListener('click', this.addClickImg)\r\n    }\r\n    componentDidMount() {\r\n       \r\n        console.log(\"ContentShow \"+this.props.id)\r\n        ServerNetWorkUtils.getArticleByArticleId(this.props.id)\r\n        .then(res => {\r\n            // console.log(res)\r\n            let result = marked(res.content);\r\n            this.setState({\r\n                html_show: result,\r\n                title: res.title,\r\n            })\r\n\r\n            this.props.tagsCallback(res.tags)\r\n\r\n        }).catch(error => {\r\n            console.log(error)\r\n        })\r\n\r\n        document.body.addEventListener('click', this.addClickImg);\r\n\r\n    }\r\n\r\n    addClickImg = (e) => {\r\n\r\n        // 判断是否点击的图片\r\n        if (e.path[0].nodeName === 'IMG') {\r\n            if (image_show) {\r\n                return\r\n            }\r\n            let params = {};\r\n            params.param = {};\r\n            // 获取imglist\r\n            var oPics = document.getElementsByTagName(\"img\");\r\n            params.param.imageArray = [];\r\n            for (let i = 0; i < oPics.length; i++) {\r\n                params.param.imageArray.push({ url: oPics[i].src });\r\n            }\r\n            for (let i = 0; i < oPics.length; i++) {\r\n                // 判断点击图片的index\r\n                if (e.path[0].src === params.param.imageArray[i].url) {\r\n                    params.param.index = i;\r\n                    break\r\n                }\r\n            }\r\n            let img_url = params.param.imageArray[params.param.index].url\r\n            console.log(img_url);\r\n            this.setState({\r\n                img_url: img_url,\r\n            })\r\n\r\n            image_show = true;\r\n            PreviewApi.preview(img_url)\r\n        } else {\r\n\r\n            image_show = false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    \r\n     \r\n\r\n    render() {\r\n        return (\r\n\r\n            \r\n            <div className={styles.right_main} >\r\n                <div className={styles.title}>{this.state.title}</div>\r\n                <div dangerouslySetInnerHTML={{ __html: this.state.html_show }} />\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"h_line\":\"src-compoent_d-ContentShow-ContentShow__h_line--hG5me\",\"v_line\":\"src-compoent_d-ContentShow-ContentShow__v_line--TgT40\",\"right_main\":\"src-compoent_d-ContentShow-ContentShow__right_main--2zUJf\",\"title\":\"src-compoent_d-ContentShow-ContentShow__title--17HR5\",\"title_sy\":\"src-compoent_d-ContentShow-ContentShow__title_sy--267Me\",\"image\":\"src-compoent_d-ContentShow-ContentShow__image--zX38z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"h_line\":\"src-features-task_tech-Tech__h_line--1-xSw\",\"v_line\":\"src-features-task_tech-Tech__v_line--2k9eP\",\"main\":\"src-features-task_tech-Tech__main--SlgGg\",\"left_main\":\"src-features-task_tech-Tech__left_main--lTp1I\",\"name\":\"src-features-task_tech-Tech__name--1dzcU\",\"title_select\":\"src-features-task_tech-Tech__title_select--jB08P\",\"right_main\":\"src-features-task_tech-Tech__right_main--2_I21\"};","import ContentShow from \"@/compoent_d/ContentShow/ContentShow\";\r\nimport TimeShow from \"@/compoent_d/time_list/TimeShow\";\r\nimport ServerNetWorkUtils from \"@/data_model/ServerNetWorkUtils\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nimport styles from './Tech.scss'\r\n\r\n\r\nlet count = 0;\r\nexport default function Tech() {\r\n\r\n    let hahah = 0\r\n    const [items, setItems] = useState([]);\r\n    const [types, setTypes] = useState([])\r\n    const [select_title_id, setSelectId] = useState('initialState')\r\n\r\n    function getTitlesByTypeItemId(objectId) {\r\n        setSelectId(objectId)\r\n        ServerNetWorkUtils.getAllTitlesArticleItemId(objectId)\r\n            .then(res => {\r\n                res = res.reverse()\r\n                let result = {}\r\n                for (let item in res) {\r\n                    let data = res[item]\r\n\r\n                    let year = new Date(data[\"createdAt\"]).getFullYear();\r\n                    let datas = result[year];\r\n\r\n                    console.log(year)\r\n                    if (datas === undefined) {\r\n                        console.log(year + \" 不存在\")\r\n                        datas = []\r\n                    }\r\n                    datas.push(data)\r\n                    result[year] = datas\r\n                }\r\n                console.log(result)\r\n                setItems(result)\r\n            }).catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    function isSelectTitle(objectId) {\r\n        return this.state.select_title_id == objectId ? styles.title_select : \"\";\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        // if (count > 3) {\r\n        //     console.log(\"死循环 阻止\")\r\n        //     return\r\n        // }\r\n        // count++;\r\n\r\n        ServerNetWorkUtils.initBmob()\r\n        console.log(\"useEffect\")\r\n\r\n        ServerNetWorkUtils.getAllTitlesTB_Type_Items()\r\n            .then(res => {\r\n                console.log(res)\r\n                setTypes(res)\r\n                getTitlesByTypeItemId(res[0].objectId)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }, [hahah])\r\n\r\n    function isSelectTitle(objectId) {\r\n        console.log(\"isSelectTitle\")\r\n        return select_title_id == objectId ? styles.title_select : \"\";\r\n    }\r\n\r\n    function clickTitle(objectId) {\r\n        console.log(objectId)\r\n        getTitlesByTypeItemId(objectId)\r\n    }\r\n\r\n    return (\r\n        <div className={styles.main}>\r\n            <div className={styles.left_main}>\r\n                {types.map(data =>\r\n                    <div\r\n                        onClick={() => clickTitle(data.objectId)}\r\n                        className={styles.name + \" \" + isSelectTitle(data.objectId)}\r\n                        key={data.objectId}>{data.name}</div>)\r\n                }\r\n            </div>\r\n            <div className={styles.v_line}></div>\r\n            <div className={styles.right_main}>\r\n                <TimeShow items={items} />\r\n            </div>\r\n        </div >\r\n    )\r\n\r\n}"],"sourceRoot":""}