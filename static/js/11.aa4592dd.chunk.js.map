{"version":3,"sources":["compoent_d/ContentShow/ContentShow.js","compoent_d/ContentShow/ContentShow.scss","features/article_detail/ArticleDetail.scss","features/article_detail/ArticleDetail.js"],"names":["marked","require","setOptions","renderer","Renderer","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","highlight","str","lang","hljs","getLanguage","value","__","highlightAuto","image_show","ContentShow","state","html_show","select_title_id","img_url","addClickImg","e","path","nodeName","params","oPics","document","getElementsByTagName","param","imageArray","i","length","push","url","src","index","setState","PreviewApi","preview","body","removeEventListener","this","ServerNetWorkUtils","getArticleByArticleId","props","id","then","res","result","content","title","tagsCallback","tags","catch","error","addEventListener","className","styles","right_main","dangerouslySetInnerHTML","__html","React","Component","module","exports","ArticleDetail","useState","setTags","objectId","match","main","left","map","item","color","BaseUtils","getRandomColor","style","backgroundColor","tag","v_line","right","split"],"mappings":"iSAaIA,EAASC,EAAQ,KACrBD,EAAOE,WAAW,CACdC,SAAU,IAAIH,EAAOI,SACrBC,KAAK,EACLC,QAAQ,EACRC,QAAQ,EACRC,UAAU,EACVC,UAAU,EACVC,YAAY,EACZC,aAAa,EACbC,UAAW,SAAUC,EAAKC,GACtB,GAAIA,GAAQC,IAAKC,YAAYF,GACzB,IACI,OAAOC,IAAKH,UAAUE,EAAMD,GAAKI,MACnC,MAAOC,IAIb,IACI,OAAOH,IAAKI,cAAcN,GAAKI,MACjC,MAAOC,IAGT,MAAO,MAIf,IAAIE,GAAa,EACIC,E,4MAEjBC,MAAQ,CAEJC,UAAW,GACXC,gBAAiB,GACjBC,QAAS,I,EA4BbC,YAAc,SAACC,GAGX,GAA2B,QAAvBA,EAAEC,KAAK,GAAGC,SAAoB,CAC9B,GAAIT,EACA,OAEJ,IAAIU,EAAS,CACbA,MAAe,IAEXC,EAAQC,SAASC,qBAAqB,OAC1CH,EAAOI,MAAMC,WAAa,GAC1B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAMM,OAAQD,IAC9BN,EAAOI,MAAMC,WAAWG,KAAK,CAAEC,IAAKR,EAAMK,GAAGI,MAEjD,IAAK,IAAIJ,EAAI,EAAGA,EAAIL,EAAMM,OAAQD,IAE9B,GAAIT,EAAEC,KAAK,GAAGY,MAAQV,EAAOI,MAAMC,WAAWC,GAAGG,IAAK,CAClDT,EAAOI,MAAMO,MAAQL,EACrB,MAGR,IAAIX,EAAUK,EAAOI,MAAMC,WAAWL,EAAOI,MAAMO,OAAOF,IAE1D,EAAKG,SAAS,CACVjB,QAASA,IAGbL,GAAa,EACbuB,IAAWC,QAAQnB,QAGnBL,GAAa,G,0DAzDrB,WACIY,SAASa,KAAKC,oBAAoB,QAASC,KAAKrB,e,+BAEpD,WAAqB,IAAD,OAGhBsB,IAAmBC,sBAAsBF,KAAKG,MAAMC,IACnDC,MAAK,SAAAC,GAEF,IAAIC,EAAStD,EAAOqD,EAAIE,SACxB,EAAKb,SAAS,CACVnB,UAAW+B,EACXE,MAAOH,EAAIG,QAGf,EAAKN,MAAMO,aAAaJ,EAAIK,SAE7BC,OAAM,SAAAC,OAIT5B,SAASa,KAAKgB,iBAAiB,QAASd,KAAKrB,e,oBA6CjD,WACI,OAGI,sBAAKoC,UAAWC,IAAOC,WAAvB,UACI,qBAAKF,UAAWC,IAAOP,MAAvB,SAA+BT,KAAKzB,MAAMkC,QAC1C,qBAAKS,wBAAyB,CAAEC,OAAQnB,KAAKzB,MAAMC,oB,GAjF1B4C,IAAMC,Y,oBCxC/CC,EAAOC,QAAU,CAAC,OAAS,wDAAwD,OAAS,wDAAwD,WAAa,4DAA4D,MAAQ,uDAAuD,SAAW,0DAA0D,MAAQ,yD,oBCAzWD,EAAOC,QAAU,CAAC,OAAS,2DAA2D,OAAS,2DAA2D,KAAO,yDAAyD,KAAO,yDAAyD,IAAM,wDAAwD,MAAQ,4D,6ICOjV,SAASC,EAAcrB,GAGlC,MAAwBsB,mBAAS,IAAjC,mBAAOd,EAAP,KAAae,EAAb,KASIC,EAAWxB,EAAMyB,MAAM7C,OAAO4C,SAClC,OAEI,sBAAKZ,UAAWC,IAAOa,KAAvB,UACI,qBAAKd,UAAWC,IAAOc,KAAvB,SACKnB,EAAKoB,KAAI,SAAAC,GACN,IAAIC,EAAQC,IAAUC,iBAEtB,OAAO,qBAAKC,MAAO,CAAEC,gBAAiB,IAAMJ,GAASlB,UAAWC,IAAOsB,IAAhE,SAAkFN,GAARA,QAGzF,qBAAKjB,UAAWC,IAAOuB,SACvB,qBAAKxB,UAAWC,IAAOwB,MAAvB,SACI,cAAC,IAAD,CAAa9B,aArBJ,SAACC,GAElB,IAAIJ,EAASI,EAAK8B,MAAM,KAGxBf,EAAQnB,IAgByCH,GAAIuB","file":"static/js/11.aa4592dd.chunk.js","sourcesContent":["import ServerNetWorkUtils from \"@/data_model/ServerNetWorkUtils\";\r\n\r\nimport React from \"react\";\r\n\r\nimport styles from './ContentShow.scss';\r\n\r\nimport hljs from \"highlight.js\";\r\nimport 'highlight.js/styles/atom-one-dark.css';\r\nimport './markdown10.scss';\r\n\r\nimport { PreviewApi } from '@zzwing/react-image'\r\n\r\n\r\nvar marked = require('marked');\r\nmarked.setOptions({\r\n    renderer: new marked.Renderer(),\r\n    gfm: true,\r\n    tables: true,\r\n    breaks: true,\r\n    pedantic: false,\r\n    sanitize: false,\r\n    smartLists: true,\r\n    smartypants: false,\r\n    highlight: function (str, lang) {\r\n        if (lang && hljs.getLanguage(lang)) {\r\n            try {\r\n                return hljs.highlight(lang, str).value;\r\n            } catch (__) {\r\n            }\r\n        }\r\n\r\n        try {\r\n            return hljs.highlightAuto(str).value;\r\n        } catch (__) {\r\n        }\r\n\r\n        return ''; // use e\r\n    }\r\n});\r\n\r\nlet image_show = false;\r\nexport default class ContentShow extends React.Component {\r\n\r\n    state = {\r\n \r\n        html_show: \"\",\r\n        select_title_id: '',\r\n        img_url: '',\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        document.body.removeEventListener('click', this.addClickImg)\r\n    }\r\n    componentDidMount() {\r\n       \r\n        console.log(\"ContentShow \"+this.props.id)\r\n        ServerNetWorkUtils.getArticleByArticleId(this.props.id)\r\n        .then(res => {\r\n            // console.log(res)\r\n            let result = marked(res.content);\r\n            this.setState({\r\n                html_show: result,\r\n                title: res.title,\r\n            })\r\n\r\n            this.props.tagsCallback(res.tags)\r\n\r\n        }).catch(error => {\r\n            console.log(error)\r\n        })\r\n\r\n        document.body.addEventListener('click', this.addClickImg);\r\n\r\n    }\r\n\r\n    addClickImg = (e) => {\r\n\r\n        // 判断是否点击的图片\r\n        if (e.path[0].nodeName === 'IMG') {\r\n            if (image_show) {\r\n                return\r\n            }\r\n            let params = {};\r\n            params.param = {};\r\n            // 获取imglist\r\n            var oPics = document.getElementsByTagName(\"img\");\r\n            params.param.imageArray = [];\r\n            for (let i = 0; i < oPics.length; i++) {\r\n                params.param.imageArray.push({ url: oPics[i].src });\r\n            }\r\n            for (let i = 0; i < oPics.length; i++) {\r\n                // 判断点击图片的index\r\n                if (e.path[0].src === params.param.imageArray[i].url) {\r\n                    params.param.index = i;\r\n                    break\r\n                }\r\n            }\r\n            let img_url = params.param.imageArray[params.param.index].url\r\n            console.log(img_url);\r\n            this.setState({\r\n                img_url: img_url,\r\n            })\r\n\r\n            image_show = true;\r\n            PreviewApi.preview(img_url)\r\n        } else {\r\n\r\n            image_show = false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    \r\n     \r\n\r\n    render() {\r\n        return (\r\n\r\n            \r\n            <div className={styles.right_main} >\r\n                <div className={styles.title}>{this.state.title}</div>\r\n                <div dangerouslySetInnerHTML={{ __html: this.state.html_show }} />\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"h_line\":\"src-compoent_d-ContentShow-ContentShow__h_line--hG5me\",\"v_line\":\"src-compoent_d-ContentShow-ContentShow__v_line--TgT40\",\"right_main\":\"src-compoent_d-ContentShow-ContentShow__right_main--2zUJf\",\"title\":\"src-compoent_d-ContentShow-ContentShow__title--17HR5\",\"title_sy\":\"src-compoent_d-ContentShow-ContentShow__title_sy--267Me\",\"image\":\"src-compoent_d-ContentShow-ContentShow__image--zX38z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"h_line\":\"src-features-article_detail-ArticleDetail__h_line--5rmkr\",\"v_line\":\"src-features-article_detail-ArticleDetail__v_line--3dmNC\",\"main\":\"src-features-article_detail-ArticleDetail__main--1Rj4z\",\"left\":\"src-features-article_detail-ArticleDetail__left---YTMP\",\"tag\":\"src-features-article_detail-ArticleDetail__tag--2_Clf\",\"right\":\"src-features-article_detail-ArticleDetail__right--1UOIm\"};","import BaseUtils from \"@/BaseUtils\";\r\nimport ContentShow from \"@/compoent_d/ContentShow/ContentShow\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nimport styles from './ArticleDetail.scss';\r\n\r\n\r\nexport default function ArticleDetail(props) {\r\n\r\n\r\n    const [tags, setTags] = useState([])\r\n    const tagsCallBack = (tags) => {\r\n        console.log(tags)\r\n        let result = tags.split(\",\")\r\n        console.log(result)\r\n\r\n        setTags(result)\r\n    }\r\n    console.log(props)\r\n    let objectId = props.match.params.objectId\r\n    return (\r\n\r\n        <div className={styles.main}>\r\n            <div className={styles.left}>\r\n                {tags.map(item => {\r\n                    let color = BaseUtils.getRandomColor();\r\n\r\n                    return <div style={{ backgroundColor: \"#\" + color }} className={styles.tag} key={item} >{item}</div>\r\n                })}\r\n            </div>\r\n            <div className={styles.v_line} />\r\n            <div className={styles.right}>\r\n                <ContentShow tagsCallback={tagsCallBack} id={objectId} />\r\n            </div>\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n    )\r\n}"],"sourceRoot":""}